<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# golang

```go
import "github.com/guiyomh/dagger-sheath-go/golang"
```

## Index

- [func Build(ctx context.Context, client *dagger.Client, workdir *dagger.Directory, opts ...BuildOption) *dagger.Directory](<#func-build>)
- [type BuildOption](<#type-buildoption>)
  - [func WithArch(arch goarch, arches ...goarch) BuildOption](<#func-witharch>)
  - [func WithBinaryName(name string) BuildOption](<#func-withbinaryname>)
  - [func WithOses(os goos, oses ...goos) BuildOption](<#func-withoses>)
  - [func WithPath(path string) BuildOption](<#func-withpath>)
  - [func WithRepository(repository, tag string) BuildOption](<#func-withrepository>)


## func Build

```go
func Build(ctx context.Context, client *dagger.Client, workdir *dagger.Directory, opts ...BuildOption) *dagger.Directory
```

Build compiles the binary

<details><summary>Example</summary>
<p>

```go
package main

import (
	"context"
	"fmt"
	"os"
	"path/filepath"

	"dagger.io/dagger"
	"github.com/guiyomh/dagger-sheath-go/golang"
)

func createDirectory(path string) error {
	if err := os.RemoveAll(path); err != nil {
		return err
	}
	if err := os.MkdirAll(path, os.ModePerm); err != nil {
		return err
	}

	return nil
}

func listDirectory(path string) error {
	return filepath.Walk(path, func(path string, info os.FileInfo, err error) error {
		if err != nil {
			fmt.Println(err)
			return err
		}
		if info.IsDir() {
			return nil
		}
		fmt.Println(path)

		return nil
	})
}

func main() {
	ctx := context.Background()
	client, err := dagger.Connect(ctx /*, dagger.WithLogOutput(os.Stdout)*/)
	if err != nil {
		panic(err)
	}
	defer client.Close()

	source := client.Host().Directory("./test")

	output := golang.Build(ctx, client, source)

	if err = createDirectory("dist/"); err != nil {
		panic(err)
	}

	_, err = output.Export(ctx, "dist/")
	if err != nil {
		panic(err)
	}

	listDirectory("dist/")
}
```

#### Output

```
dist/example_test
```

</p>
</details>

<details><summary>Example (Multiarch)</summary>
<p>

```go
package main

import (
	"context"
	"fmt"
	"os"
	"path/filepath"

	"dagger.io/dagger"
	"github.com/guiyomh/dagger-sheath-go/golang"
)

func createDirectory(path string) error {
	if err := os.RemoveAll(path); err != nil {
		return err
	}
	if err := os.MkdirAll(path, os.ModePerm); err != nil {
		return err
	}

	return nil
}

func listDirectory(path string) error {
	return filepath.Walk(path, func(path string, info os.FileInfo, err error) error {
		if err != nil {
			fmt.Println(err)
			return err
		}
		if info.IsDir() {
			return nil
		}
		fmt.Println(path)

		return nil
	})
}

func main() {
	ctx := context.Background()
	client, err := dagger.Connect(ctx /*, dagger.WithLogOutput(os.Stdout)*/)
	if err != nil {
		panic(err)
	}
	defer client.Close()

	source := client.Host().Directory("./test")

	output := golang.Build(
		ctx,
		client,
		source,
		golang.WithArch(golang.ArchAmd64),
		golang.WithOses(golang.OsLinux, golang.OsDarwin),
		golang.WithBinaryName("my_binary"),
	)

	if err = createDirectory("multi_dist/"); err != nil {
		panic(err)
	}

	_, err = output.Export(ctx, "multi_dist/")
	if err != nil {
		panic(err)
	}

	listDirectory("multi_dist/")
}
```

#### Output

```
multi_dist/darwin/amd64/my_binary_darwin_amd64
multi_dist/linux/amd64/my_binary_linux_amd64
```

</p>
</details>

## type BuildOption

BuildOption is a function that configures the build action.

```go
type BuildOption = func(config) config
```

### func WithArch

```go
func WithArch(arch goarch, arches ...goarch) BuildOption
```

WithArch defines the list of ARCH used to build the binary

### func WithBinaryName

```go
func WithBinaryName(name string) BuildOption
```

#### WithBinaryName specifies the name a the builded binary

If you build multiple os and arch, this name will be used as a prefix

### func WithOses

```go
func WithOses(os goos, oses ...goos) BuildOption
```

WithOses defines the list of OS used to build the binary

### func WithPath

```go
func WithPath(path string) BuildOption
```

WithPath specifies the path of the executable

### func WithRepository

```go
func WithRepository(repository, tag string) BuildOption
```

WithRepository allows to specify a custom repository and tag



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
